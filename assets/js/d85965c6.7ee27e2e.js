"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[381],{3911:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>p,frontMatter:()=>s,metadata:()=>a,toc:()=>d});var t=i(4848),r=i(8453);const s={sidebar_position:5,title:"Filtering"},l="Filtering in Aristotle WS",a={id:"filtering",title:"Filtering",description:"Aristotle WS provides powerful filtering capabilities, allowing users to query nodes in the knowledge graph based on specific criteria. This feature enhances data retrieval by enabling targeted searches, thus improving the performance and relevance of results.",source:"@site/docs/filtering.md",sourceDirName:".",slug:"/filtering",permalink:"/docs/filtering",draft:!1,unlisted:!1,editUrl:"https://github.com/paion-data/aristotle/tree/master/docs/docs/filtering.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5,title:"Filtering"},sidebar:"tutorialSidebar",previous:{title:"Deployment",permalink:"/docs/deployment"},next:{title:"Caching",permalink:"/docs/caching"}},o={},d=[{value:"How Filters Are Implemented",id:"how-filters-are-implemented",level:2},{value:"Details of Filtering Logic Implementation",id:"details-of-filtering-logic-implementation",level:2},{value:"How to Pass Filter Conditions",id:"how-to-pass-filter-conditions",level:2},{value:"Parameter Descriptions",id:"parameter-descriptions",level:3},{value:"Response Example",id:"response-example",level:3},{value:"Use Cases for Filtering Functionality",id:"use-cases-for-filtering-functionality",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"filtering-in-aristotle-ws",children:"Filtering in Aristotle WS"})}),"\n",(0,t.jsx)(n.p,{children:"Aristotle WS provides powerful filtering capabilities, allowing users to query nodes in the knowledge graph based on specific criteria. This feature enhances data retrieval by enabling targeted searches, thus improving the performance and relevance of results."}),"\n",(0,t.jsx)(n.h2,{id:"how-filters-are-implemented",children:"How Filters Are Implemented"}),"\n",(0,t.jsxs)(n.p,{children:["The filtering functionality is implemented through a Data Transfer Object (DTO) called ",(0,t.jsx)(n.code,{children:"FilterQueryGraphDTO"}),". It includes two main components:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"uuid"}),": A unique identifier for the graph, indicating the specific graph to query."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"properties"}),": A ",(0,t.jsx)(n.code,{children:"Map<String, String>"})," that represents the filtering criteria. Each key-value pair's key corresponds to an attribute of the graph nodes, while the value represents the filtering value for that attribute."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"For example, a user can specify the filtering criteria in the following format:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "uuid": "3e308cd7b15c46bea971b43e090b18d2",\n  "properties": {\n    "language": "En",\n    "status": "false"\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The above request will filter for nodes in the graph where ",(0,t.jsx)(n.code,{children:"language"}),' is "En" and ',(0,t.jsx)(n.code,{children:"status"}),' is "false".']}),"\n",(0,t.jsx)(n.h2,{id:"details-of-filtering-logic-implementation",children:"Details of Filtering Logic Implementation"}),"\n",(0,t.jsxs)(n.p,{children:["In the service layer, the business logic processes this filtering through the ",(0,t.jsx)(n.code,{children:"getRelationByGraphUuid"})," method. This method dynamically constructs the Cypher query based on the provided ",(0,t.jsx)(n.code,{children:"uuid"})," and ",(0,t.jsx)(n.code,{children:"properties"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'final String cypherQuery = "MATCH (g1:Graph { uuid: $uuid }) "\n        + "OPTIONAL MATCH (g1)-[:RELATION]->(n1:GraphNode) "\n        + (properties != null && !properties.isEmpty() ?\n        getFilterProperties(Constants.NODE_ALIAS_N1, properties.entrySet()) : "")\n        + " OPTIONAL MATCH (n1)-[r:RELATION]->(n2:GraphNode) "\n        + (properties != null && !properties.isEmpty() ?\n        getFilterProperties(Constants.NODE_ALIAS_N2, properties.entrySet()) : "")\n        + " RETURN DISTINCT n1, r, n2";\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Here, the ",(0,t.jsx)(n.code,{children:"getFilterProperties"})," method converts the filtering criteria into appropriate Cypher query snippets. For instance, if ",(0,t.jsx)(n.code,{children:"properties"})," contains ",(0,t.jsx)(n.code,{children:'{ "language": "En", "Status": "false" }'}),", the generated Cypher query will be similar to:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-cypher",children:"MATCH (g1:Graph { uuid: $uuid }) \nOPTIONAL MATCH (g1)-[:RELATION]->(n1:GraphNode { language: 'En', Status: 'false' }) \nOPTIONAL MATCH (n1)-[r:RELATION]->(n2:GraphNode { language: 'En', Status: 'false' }) \nRETURN DISTINCT n1, r, n2\n"})}),"\n",(0,t.jsxs)(n.p,{children:["If ",(0,t.jsx)(n.code,{children:"properties"})," is empty or not provided, the query does not perform additional filtering and returns all nodes that meet the criteria."]}),"\n",(0,t.jsx)(n.h2,{id:"how-to-pass-filter-conditions",children:"How to Pass Filter Conditions"}),"\n",(0,t.jsxs)(n.p,{children:["When sending a filtering request to Aristotle WS, the user must use the POST method and include the graph's ",(0,t.jsx)(n.code,{children:"uuid"})," and ",(0,t.jsx)(n.code,{children:"properties"})," in the request body. For example:"]}),"\n",(0,t.jsx)(n.p,{children:"POST /graph\nContent-Type: application/json"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "uuid": "3e308cd7b15c46bea971b43e090b18d2",\n  "properties": {\n  "language": "En",\n  "Status": "false"\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"parameter-descriptions",children:"Parameter Descriptions"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"uuid"}),": Required, specifies the unique identifier for the graph to query."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"properties"}),": Optional, a JSON object representing the filtering conditions as key-value pairs that match node attributes. Multiple attributes can be specified to combine filters."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"response-example",children:"Response Example"}),"\n",(0,t.jsx)(n.p,{children:"If the filtering is successful, the service will return the nodes and relationships that match the criteria. For example, a possible response could look like this:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "code": 200,\n  "msg": "Successful operation",\n  "data": {\n    "uuid": "3e308cd7b15c46bea971b43e090b18d2",\n    "title": "Language Graph",\n    "description": "Language related graph",\n    "createTime": "2024-10-19 16:07:26",\n    "updateTime": "2024-10-19 16:07:26",\n    "nodes": [\n      {\n        "uuid": "2ab78d7c532b41cda028084fd8a5cdd3",\n        "properties": {\n          "Status": "false",\n          "language": "En",\n          "exercitatione9": "reprehenderit tempor minim ad qui"\n        },\n        "createTime": "2024-10-19 16:07:26",\n        "updateTime": "2024-10-19 16:07:26"\n      }\n    ],\n    "relations": []\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"use-cases-for-filtering-functionality",children:"Use Cases for Filtering Functionality"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"UPrecise Data Selection"}),": The filtering functionality allows quick selection of specific nodes within large graphs, such as filtering active or inactive users or specific language content."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Multi-condition Combination Queries"}),": The ",(0,t.jsx)(n.code,{children:"properties"})," object supports the combination of multiple conditions, enabling users to filter nodes based on various attributes simultaneously, such as language and status."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Default Return of All Data"}),": If no ",(0,t.jsx)(n.code,{children:"properties"})," are provided or an empty object is passed, the system will return all nodes and relationship data."]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>a});var t=i(6540);const r={},s=t.createContext(r);function l(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);